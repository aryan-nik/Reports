# فصل 5: فرمت دهی

---



زمانی که دیگران به سورس کد ما نگاه میکنند، میخواهیم آنها را با پاکیزگی، خوانایی و توجه به جزئیات، تحت تاثیر قرار دهیم. 

اما هدف فرمت دهی چیست؟ قطعا این تصور که تنها کدی بنویسیم که کار کند هدف درستی نیست. زمانی که کد خوانایی خود را از دست بدهد نه تنها امکان ارتباط برقرار کردن با هم تیمی ها دچار مشکل میشود، برای خود نویسنده ی کد نیز در هنگام مرور و عیب یابی کدها مشکلات جدیدی ایجاد میشود.

در ادامه با مواردی که هنگام فرمت دهی به کدهای خود باید در نظر داشته باشیم آورده شده است.



### فرمت دهی عمودی

سایز عمودی یا همان تعداد کدهای هر فایل چقدر باید باشد. این فصل ابتدا تعداد خطوط هر فایل در چند پروژه ی معروف در زبان جاوا مورد بررسی قرار گرفته است.

نتیجه: شما میتوانید یک برنامه یا سیستم عالی تولید کنید تنها با میانگین 200 خط کد در هر فایل.



#### کد نویسی مثل مقالات روزنامه!

زمانی که یک روزنامه را مطالعه میکنید ابتدا به عناوین اصلی توجه میکنید سپس پاراگراف اول مقاله ایده ی اصلی مقاله را به شما میدهد و سپس پاراگراف های بعدی است که شما را با جزئیات مقاله آشنا میکند. کدهای شما نیز بهتر است این چنین فرمتی داشته باشند. در این قسمت پیشنهاد میشود مانند روزنامه مهم ترین قطعات کد در ابتدا شما را متوجه هدف نوشته شدن فایل کند.



#### جای نفس کشیدن!
 نبودن فاصله بین خطوط قطعا باعث ناخوانا شدن کد میشود. فاصله گذاری ساده میتوانند تغییر زیادی در کد شما بگذارد. 

با این وجود این نباید باعث شود فاصله ی خطوطی که به هر طریقی ارتباط معنایی با هم دارند از هم فاصله بگیرند. با نزدیک کردن این خطوط به هم و برداشتن کامنت های بی مورد از میان آنها اصطلاحا "وزن عمودی" این خطوط بیشتر میشود که باعث خوانایی بیشتر میشود.

همچنین بهتر است تمام خطوط مرتبط در فایل یکسان قرار داشته باشند.



#### تعریف متغیر ها

متغیر باید تا جایی که امکان دارد نزدیک به مورد استفاده اش باشد.

البته در مورد اعضای کلاس بهتر است در بالای همان کلاس تعریف شوند.



#### توابع وابسته

هنگامی که تابعی در تابع دیگر فراخوانی میشود، بهتر است تابع فراخوان در بالای تابع فراخوانی شده قرار داشته باشد.

اما از آنجا که چنین کاری در بعضی زبان ها امکان ندارد، توابع فرخوانی شده باید در بالا قرار بگیرند.



### فرمت دهی افقی

اما طول خطوط چقدر باید باشد؟

پیشنهاد میشود بیشتر از 120 کاراکتر نباشند. تمام وابستگی های شدید با فاصله ی افقی کمی از هم می آیند.



```java
public class Quadratic {  
    public static double root1(double a, double b, double c) {
    double determinant = determinant(a, b, c);    return (-b + Math.sqrt(determinant)) / (2*a);  
   }
    
  public static double root2(int a, int b, int c) {    
      double determinant = determinant(a, b, c);    return (-b - Math.sqrt(determinant)) / (2*a);
  }
    
  private static double determinant(double a, double b, double c) {    return b*b - 4*a*c;
  }
}
```



به این کد دقت کنید. فاصله گذاری با space انجام شده البته بین تابع و پرانتز پارامتر های ورودی فاصله ای نیست زیرا ورودی تابع به شدت به تعریف تابع وابسته است.



### <!--چینش عمودی -->

<!--توجه کنید چینش عمودی حتی اگر باعث زیبایی که شود نباید باعث جلب تمرکز روی موارد غیر مهم شود. -->



#### فرو رفتگی

فایل منبع یک سلسه مراتب است. یک کلاس در بالاترین قسمت سلسله مراتب قرار دارد، یک متد پایین از کلاس و درون هر متد بلاک هایی وجود دارند که در پایین ترین سطح قرار میگیرند.

بهترین راه برای نشان دادن این سلسله مراتب بهترین کار همین فرورفتگی ها (indentions) یا فاصله ی افقی هر خط از لبه ی فایل است.

حتما متوجه شده اید که این فاصله گذاری ها به شما در پیدا کردن کدهای مرتب بسیار کمک میکند. مثلا این کد در کدام حلقه قرار دارد، دستورات درون این if کجا تمام میشوند.

حتی زمانی که تنها یک خط درون یک بلاک if قرار میگیرد هم بهتر است این اصل مورد توجه قرار گیرد.



#### قوانین تیم

البته بعد از گذشت از تمام مطالب ارائه شده، باید توجه کرد که هر تیمی ممکن است قوانین خود را برای فرمت دهی به داشته باشد. اگر این قوانین برای تیم شما کار میکند و فرمت دهی معقولی وجود دارد چرا از آن ها تبعیت نکرد.
